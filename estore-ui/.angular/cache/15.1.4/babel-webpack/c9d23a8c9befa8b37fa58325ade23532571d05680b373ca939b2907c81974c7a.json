{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../product.service\";\nimport * as i2 from \"../sharing-service\";\nimport * as i3 from \"../shopping-cart.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"@angular/router\";\nfunction ProductsComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 3);\n    i0.ɵɵtext(2, \"Product name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"input\", 4, 5);\n    i0.ɵɵelementStart(5, \"button\", 6);\n    i0.ɵɵlistener(\"click\", function ProductsComponent_div_2_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const _r2 = i0.ɵɵreference(4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      ctx_r3.add(_r2.value);\n      return i0.ɵɵresetView(_r2.value = \"\");\n    });\n    i0.ɵɵtext(6, \" Add product \");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductsComponent_li_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"li\")(1, \"a\", 7)(2, \"span\", 8);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4);\n    i0.ɵɵelementStart(5, \"span\", 8);\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"span\", 8);\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"span\", 8);\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()()();\n  }\n  if (rf & 2) {\n    const product_r5 = ctx.$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵpropertyInterpolate1(\"routerLink\", \"/detail/\", product_r5.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(product_r5.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", product_r5.name, \" \");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"price : \", product_r5.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"quantity : \", product_r5.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"description : \", product_r5.description, \"\");\n  }\n}\n/**\r\n * The data attached to the products component\r\n */\nexport class ProductsComponent {\n  /**\r\n   *  The constructor of the products componet\r\n   * @param productService - imported to aid the functions\r\n   * @param shareService - imported to aid the functions\r\n   * @param shoppingCartService - imported to aid the functions\r\n   */\n  constructor(productService, shareService, shoppingCartService) {\n    this.productService = productService;\n    this.shareService = shareService;\n    this.shoppingCartService = shoppingCartService;\n    this.products = [];\n    this.isLoggedIn = false;\n    this.isAdmin = false;\n  }\n  /**\r\n   * The function initializes the following data upon opening the page\r\n   */\n  ngOnInit() {\n    this.getProducts();\n    this.currentUser = this.shareService.getData();\n    if (this.currentUser) {\n      this.isLoggedIn = true;\n      if (this.currentUser.username === \"admin\") {\n        this.isAdmin = true;\n      }\n    }\n  }\n  /**\r\n   * The function serves to get the desired products when requested\r\n   */\n  getProducts() {\n    this.productService.getProducts().subscribe(products => this.products = products);\n  }\n  /**\r\n   * The function adds the product to the store\r\n   * @param name - the name of the product\r\n   */\n  add(name) {\n    name = name.trim();\n    if (!name) {\n      return;\n    }\n    this.productService.addProduct({\n      name\n    }).subscribe(product => {\n      this.products.push(product);\n    });\n  }\n  /**\r\n   * The function deletes the product from the store\r\n   * @param product - the product to be deleted\r\n   */\n  delete(product) {\n    this.products = this.products.filter(h => h !== product);\n    this.productService.deleteProduct(product.id).subscribe();\n  }\n  /**\r\n   * Adds a selected product to the cart\r\n   * @param product - the product to be added to the cart\r\n   */\n  addToCart(product) {\n    if (this.currentUser != undefined) {\n      this.shoppingCartService.addToCartMain(product);\n    }\n  }\n}\nProductsComponent.ɵfac = function ProductsComponent_Factory(t) {\n  return new (t || ProductsComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.SharingService), i0.ɵɵdirectiveInject(i3.ShoppingCartService));\n};\nProductsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductsComponent,\n  selectors: [[\"app-products\"]],\n  decls: 5,\n  vars: 2,\n  consts: [[4, \"ngIf\"], [1, \"products\"], [4, \"ngFor\", \"ngForOf\"], [\"for\", \"new-product\"], [\"id\", \"new-product\"], [\"productName\", \"\"], [\"type\", \"button\", 1, \"add-button\", 3, \"click\"], [3, \"routerLink\"], [1, \"badge\"]],\n  template: function ProductsComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"h2\");\n      i0.ɵɵtext(1, \"Products\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(2, ProductsComponent_div_2_Template, 7, 0, \"div\", 0);\n      i0.ɵɵelementStart(3, \"ul\", 1);\n      i0.ɵɵtemplate(4, ProductsComponent_li_4_Template, 11, 6, \"li\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.isAdmin);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngForOf\", ctx.products);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf, i5.RouterLink],\n  styles: [\".products[_ngcontent-%COMP%] {\\r\\n    color: #4a0101;\\r\\n    margin: 0 0 2em 0;\\r\\n    list-style-type: none;\\r\\n    padding: 0;\\r\\n    width: 60em;\\r\\n}\\r\\n  \\r\\n  input[_ngcontent-%COMP%] {\\r\\n    display: block;\\r\\n    width: 100%;\\r\\n    padding: .5rem;\\r\\n    margin: 1rem 0;\\r\\n    box-sizing: border-box;\\r\\n  }\\r\\n  \\r\\n  .heroes[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\r\\n    position: relative;\\r\\n    cursor: pointer;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover {\\r\\n    left: .1em;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\r\\n    color: #000;\\r\\n    background-color: #cfcfcf; \\r\\n    text-decoration: none;\\r\\n    margin: .5em;\\r\\n    padding: .3em 0;\\r\\n    height: 1.6em;\\r\\n    border-radius: 4px;\\r\\n    display: block;\\r\\n    width: 100%;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover {\\r\\n    color: #eee;\\r\\n    background-color: #e84d4d;\\r\\n    text-decoration: underline;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:active {\\r\\n    background-color: #525252;\\r\\n    color: #fafafa;\\r\\n  }\\r\\n  \\r\\n  .products[_ngcontent-%COMP%]   .badge[_ngcontent-%COMP%] {\\r\\n    color: #eee;\\r\\n    background-color: #7a0f0f;\\r\\n    display: inline-block;\\r\\n    font-size: small;\\r\\n    padding: 0.8em 0.7em 0 0.7em;\\r\\n    line-height: 1em;\\r\\n    position: relative;\\r\\n    left: -1px;\\r\\n    top: -4px;\\r\\n    height: 1.8em;\\r\\n    min-width: 16px;\\r\\n    text-align: right;\\r\\n    margin-right: .8em;\\r\\n    border-radius: 4px 0 0 4px;\\r\\n  }\\r\\n  \\r\\n  .add-button[_ngcontent-%COMP%] {\\r\\n    color: #eee;\\r\\n    background-color: #696969;\\r\\n   padding: .5rem 1.5rem;\\r\\n   font-size: 1rem;\\r\\n   margin-bottom: 2rem;\\r\\n  }\\r\\n  \\r\\n  .add-button[_ngcontent-%COMP%]:hover {\\r\\n    color: white;\\r\\n    background-color: #e84d4d;\\r\\n  }\\r\\n  \\r\\n  button.delete[_ngcontent-%COMP%] {\\r\\n    position: absolute;\\r\\n    left: 210px;\\r\\n    top: 5px;\\r\\n    background-color: white;\\r\\n    color:  #525252;\\r\\n    font-size: 1.1rem;\\r\\n    margin: 0;\\r\\n    padding: 1px 10px 3px 10px;\\r\\n  }\\r\\n  \\r\\n  button.delete[_ngcontent-%COMP%]:hover {\\r\\n    background-color: #525252;\\r\\n    color: white;\\r\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdHMvcHJvZHVjdHMuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSx5Q0FBeUM7QUFDekM7SUFDSSxjQUFjO0lBQ2QsaUJBQWlCO0lBQ2pCLHFCQUFxQjtJQUNyQixVQUFVO0lBQ1YsV0FBVztBQUNmOztFQUVFO0lBQ0UsY0FBYztJQUNkLFdBQVc7SUFDWCxjQUFjO0lBQ2QsY0FBYztJQUNkLHNCQUFzQjtFQUN4Qjs7RUFFQTtJQUNFLGtCQUFrQjtJQUNsQixlQUFlO0VBQ2pCOztFQUVBO0lBQ0UsVUFBVTtFQUNaOztFQUVBO0lBQ0UsV0FBVztJQUNYLHlCQUF5QixFQUFFLGdDQUFnQztJQUMzRCxxQkFBcUI7SUFDckIsWUFBWTtJQUNaLGVBQWU7SUFDZixhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLGNBQWM7SUFDZCxXQUFXO0VBQ2I7O0VBRUE7SUFDRSxXQUFXO0lBQ1gseUJBQXlCO0lBQ3pCLDBCQUEwQjtFQUM1Qjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixjQUFjO0VBQ2hCOztFQUVBO0lBQ0UsV0FBVztJQUNYLHlCQUF5QjtJQUN6QixxQkFBcUI7SUFDckIsZ0JBQWdCO0lBQ2hCLDRCQUE0QjtJQUM1QixnQkFBZ0I7SUFDaEIsa0JBQWtCO0lBQ2xCLFVBQVU7SUFDVixTQUFTO0lBQ1QsYUFBYTtJQUNiLGVBQWU7SUFDZixpQkFBaUI7SUFDakIsa0JBQWtCO0lBQ2xCLDBCQUEwQjtFQUM1Qjs7RUFFQTtJQUNFLFdBQVc7SUFDWCx5QkFBeUI7R0FDMUIscUJBQXFCO0dBQ3JCLGVBQWU7R0FDZixtQkFBbUI7RUFDcEI7O0VBRUE7SUFDRSxZQUFZO0lBQ1oseUJBQXlCO0VBQzNCOztFQUVBO0lBQ0Usa0JBQWtCO0lBQ2xCLFdBQVc7SUFDWCxRQUFRO0lBQ1IsdUJBQXVCO0lBQ3ZCLGVBQWU7SUFDZixpQkFBaUI7SUFDakIsU0FBUztJQUNULDBCQUEwQjtFQUM1Qjs7RUFFQTtJQUNFLHlCQUF5QjtJQUN6QixZQUFZO0VBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBIZXJvZXNDb21wb25lbnQncyBwcml2YXRlIENTUyBzdHlsZXMgKi9cclxuLnByb2R1Y3RzIHtcclxuICAgIGNvbG9yOiAjNGEwMTAxO1xyXG4gICAgbWFyZ2luOiAwIDAgMmVtIDA7XHJcbiAgICBsaXN0LXN0eWxlLXR5cGU6IG5vbmU7XHJcbiAgICBwYWRkaW5nOiAwO1xyXG4gICAgd2lkdGg6IDYwZW07XHJcbn1cclxuICBcclxuICBpbnB1dCB7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gICAgcGFkZGluZzogLjVyZW07XHJcbiAgICBtYXJnaW46IDFyZW0gMDtcclxuICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7XHJcbiAgfVxyXG4gIFxyXG4gIC5oZXJvZXMgbGkge1xyXG4gICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgY3Vyc29yOiBwb2ludGVyO1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdHMgbGk6aG92ZXIge1xyXG4gICAgbGVmdDogLjFlbTtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3RzIGEge1xyXG4gICAgY29sb3I6ICMwMDA7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjY2ZjZmNmOyAvKiBtYWtlIHRoaXMgYSB2ZXJ5IGxpZ2h0IHJlZD8gKi9cclxuICAgIHRleHQtZGVjb3JhdGlvbjogbm9uZTtcclxuICAgIG1hcmdpbjogLjVlbTtcclxuICAgIHBhZGRpbmc6IC4zZW0gMDtcclxuICAgIGhlaWdodDogMS42ZW07XHJcbiAgICBib3JkZXItcmFkaXVzOiA0cHg7XHJcbiAgICBkaXNwbGF5OiBibG9jaztcclxuICAgIHdpZHRoOiAxMDAlO1xyXG4gIH1cclxuICBcclxuICAucHJvZHVjdHMgYTpob3ZlciB7XHJcbiAgICBjb2xvcjogI2VlZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlODRkNGQ7XHJcbiAgICB0ZXh0LWRlY29yYXRpb246IHVuZGVybGluZTtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3RzIGE6YWN0aXZlIHtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM1MjUyNTI7XHJcbiAgICBjb2xvcjogI2ZhZmFmYTtcclxuICB9XHJcbiAgXHJcbiAgLnByb2R1Y3RzIC5iYWRnZSB7XHJcbiAgICBjb2xvcjogI2VlZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICM3YTBmMGY7XHJcbiAgICBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7XHJcbiAgICBmb250LXNpemU6IHNtYWxsO1xyXG4gICAgcGFkZGluZzogMC44ZW0gMC43ZW0gMCAwLjdlbTtcclxuICAgIGxpbmUtaGVpZ2h0OiAxZW07XHJcbiAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICBsZWZ0OiAtMXB4O1xyXG4gICAgdG9wOiAtNHB4O1xyXG4gICAgaGVpZ2h0OiAxLjhlbTtcclxuICAgIG1pbi13aWR0aDogMTZweDtcclxuICAgIHRleHQtYWxpZ246IHJpZ2h0O1xyXG4gICAgbWFyZ2luLXJpZ2h0OiAuOGVtO1xyXG4gICAgYm9yZGVyLXJhZGl1czogNHB4IDAgMCA0cHg7XHJcbiAgfVxyXG4gIFxyXG4gIC5hZGQtYnV0dG9uIHtcclxuICAgIGNvbG9yOiAjZWVlO1xyXG4gICAgYmFja2dyb3VuZC1jb2xvcjogIzY5Njk2OTtcclxuICAgcGFkZGluZzogLjVyZW0gMS41cmVtO1xyXG4gICBmb250LXNpemU6IDFyZW07XHJcbiAgIG1hcmdpbi1ib3R0b206IDJyZW07XHJcbiAgfVxyXG4gIFxyXG4gIC5hZGQtYnV0dG9uOmhvdmVyIHtcclxuICAgIGNvbG9yOiB3aGl0ZTtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlODRkNGQ7XHJcbiAgfVxyXG4gIFxyXG4gIGJ1dHRvbi5kZWxldGUge1xyXG4gICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgbGVmdDogMjEwcHg7XHJcbiAgICB0b3A6IDVweDtcclxuICAgIGJhY2tncm91bmQtY29sb3I6IHdoaXRlO1xyXG4gICAgY29sb3I6ICAjNTI1MjUyO1xyXG4gICAgZm9udC1zaXplOiAxLjFyZW07XHJcbiAgICBtYXJnaW46IDA7XHJcbiAgICBwYWRkaW5nOiAxcHggMTBweCAzcHggMTBweDtcclxuICB9XHJcbiAgXHJcbiAgYnV0dG9uLmRlbGV0ZTpob3ZlciB7XHJcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjNTI1MjUyO1xyXG4gICAgY29sb3I6IHdoaXRlO1xyXG4gIH0iXSwic291cmNlUm9vdCI6IiJ9 */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;IAEAA,2BAAqB;IACMA,8BAAc;IAAAA,iBAAQ;IAC/CA,8BAAuC;IAGvCA,iCAAgG;IAAvDA;MAAAA;MAAA;MAAA;MAASC,qBAAsB;MAAA,OAAED,2BAAkB,EAAE;IAAA,EAAC;IAC7FA,6BACF;IAAAA,iBAAS;;;;;IAITA,0BAAqC;IAEbA,YAAc;IAAAA,iBAAO;IAACA,YAAiB;IAAAA,+BAAoB;IAAAA,YAA6B;IAAAA,iBAAO;IACnHA,+BAAoB;IAAAA,YAAmC;IAAAA,iBAAO;IAC9DA,+BAAoB;IAAAA,aAAyC;IAAAA,iBAAO;;;;IAHnEA,eAAmC;IAAnCA,sEAAmC;IAChBA,eAAc;IAAdA,mCAAc;IAAQA,eAAiB;IAAjBA,gDAAiB;IAAoBA,eAA6B;IAA7BA,uDAA6B;IACxFA,eAAmC;IAAnCA,6DAAmC;IACnCA,eAAyC;IAAzCA,mEAAyC;;;ACJnE;;;AAGA,OAAM,MAAOE,iBAAiB;EAK9B;;;;;;EAMEC,YAAoBC,cAA8B,EACxCC,YAA4B,EAC5BC,mBAAwC;IAF9B,mBAAc,GAAdF,cAAc;IACxB,iBAAY,GAAZC,YAAY;IACZ,wBAAmB,GAAnBC,mBAAmB;IAZ7B,aAAQ,GAAc,EAAE;IAExB,eAAU,GAAW,KAAK;IAC1B,YAAO,GAAW,KAAK;EAUjB;EAEN;;;EAGAC,QAAQ;IACN,IAAI,CAACC,WAAW,EAAE;IAClB,IAAI,CAACC,WAAW,GAAE,IAAI,CAACJ,YAAY,CAACK,OAAO,EAAE;IAC7C,IAAG,IAAI,CAACD,WAAW,EAAC;MAClB,IAAI,CAACE,UAAU,GAAE,IAAI;MACrB,IAAG,IAAI,CAACF,WAAW,CAACG,QAAQ,KAAK,OAAO,EAAC;QACvC,IAAI,CAACC,OAAO,GAAE,IAAI;;;EAGxB;EACA;;;EAGAL,WAAW;IACT,IAAI,CAACJ,cAAc,CAACI,WAAW,EAAE,CAChCM,SAAS,CAACC,QAAQ,IAAI,IAAI,CAACA,QAAQ,GAAGA,QAAQ,CAAC;EAClD;EACA;;;;EAIAC,GAAG,CAACC,IAAY;IACdA,IAAI,GAAGA,IAAI,CAACC,IAAI,EAAE;IAClB,IAAI,CAACD,IAAI,EAAE;MAAE;;IACb,IAAI,CAACb,cAAc,CAACe,UAAU,CAAC;MAAEF;IAAI,CAAa,CAAC,CAChDH,SAAS,CAACM,OAAO,IAAG;MACnB,IAAI,CAACL,QAAQ,CAACM,IAAI,CAACD,OAAO,CAAC;IAC7B,CAAC,CAAC;EACN;EACA;;;;EAIAE,MAAM,CAACF,OAAgB;IACrB,IAAI,CAACL,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACQ,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKJ,OAAO,CAAC;IACxD,IAAI,CAAChB,cAAc,CAACqB,aAAa,CAACL,OAAO,CAACM,EAAE,CAAC,CAACZ,SAAS,EAAE;EAC3D;EACA;;;;EAIAa,SAAS,CAACP,OAAgB;IACxB,IAAG,IAAI,CAACX,WAAW,IAAImB,SAAS,EAAE;MAC9B,IAAI,CAACtB,mBAAmB,CAACuB,aAAa,CAACT,OAAO,CAAC;;EAErD;;AAhEWlB,iBAAiB;mBAAjBA,iBAAiB;AAAA;AAAjBA,iBAAiB;QAAjBA,iBAAiB;EAAA4B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDhB9BlC,0BAAI;MAAAA,wBAAQ;MAAAA,iBAAK;MAEjBA,kEAQM;MAENA,6BAAqB;MACnBA,iEAWK;MACPA,iBAAK;;;MAvBCA,eAAa;MAAbA,kCAAa;MAWOA,eAAW;MAAXA,sCAAW","names":["i0","ctx_r3","ProductsComponent","constructor","productService","shareService","shoppingCartService","ngOnInit","getProducts","currentUser","getData","isLoggedIn","username","isAdmin","subscribe","products","add","name","trim","addProduct","product","push","delete","filter","h","deleteProduct","id","addToCart","undefined","addToCartMain","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["C:\\Users\\raymo\\SWEN261\\team-project-2225-swen-261-03-g-team0\\estore-ui\\src\\app\\products\\products.component.html","C:\\Users\\raymo\\SWEN261\\team-project-2225-swen-261-03-g-team0\\estore-ui\\src\\app\\products\\products.component.ts"],"sourcesContent":["<h2>Products</h2>\r\n\r\n<div *ngIf=\"isAdmin\">\r\n  <label for=\"new-product\">Product name: </label>\r\n  <input id=\"new-product\" #productName />\r\n\r\n  <!-- (click) passes input value to add() and then clears the input -->\r\n  <button type=\"button\" class=\"add-button\" (click)=\"add(productName.value); productName.value=''\">\r\n    Add product\r\n  </button>\r\n</div>\r\n\r\n<ul class=\"products\">\r\n  <li *ngFor=\"let product of products\">\r\n    <a routerLink=\"/detail/{{product.id}}\">\r\n      <span class=\"badge\">{{product.id}}</span> {{product.name}} <span class=\"badge\">price : {{  product.price  }}</span>\r\n      <span class=\"badge\">quantity : {{  product.quantity  }}</span>\r\n      <span class=\"badge\">description : {{  product.description  }}</span>  \r\n      <!--\r\n      <span *ngIf=\"!isAdmin &&isLoggedIn\"> \r\n        <button class=\"button\" (click)=\"addToCart(product)\">Add To Cart</button>\r\n      </span>\r\n      -->\r\n    </a>\r\n  </li>\r\n</ul>","import { Component, OnInit } from '@angular/core';\r\nimport { Login } from '../login';\r\nimport { Product } from '../product';\r\nimport { ProductService } from '../product.service';\r\nimport { SharingService } from '../sharing-service';\r\nimport { ShoppingCartService } from '../shopping-cart.service';\r\n\r\n\r\n@Component({\r\n  selector: 'app-products',\r\n  templateUrl: './products.component.html',\r\n  styleUrls: ['./products.component.css']\r\n})\r\n/**\r\n * The data attached to the products component\r\n */\r\nexport class ProductsComponent implements OnInit {\r\n  products: Product[] = [];\r\n  currentUser: Login|undefined;\r\n  isLoggedIn: boolean= false;\r\n  isAdmin: boolean= false;\r\n/**\r\n *  The constructor of the products componet\r\n * @param productService - imported to aid the functions\r\n * @param shareService - imported to aid the functions\r\n * @param shoppingCartService - imported to aid the functions\r\n */\r\n  constructor(private productService: ProductService,\r\n    private shareService: SharingService,\r\n    private shoppingCartService: ShoppingCartService\r\n    ) { }\r\n    \r\n  /**\r\n   * The function initializes the following data upon opening the page\r\n   */\r\n  ngOnInit(): void {\r\n    this.getProducts();\r\n    this.currentUser= this.shareService.getData();\r\n    if(this.currentUser){\r\n      this.isLoggedIn= true;\r\n      if(this.currentUser.username === \"admin\"){\r\n        this.isAdmin= true;\r\n      }\r\n    }\r\n  }\r\n  /**\r\n   * The function serves to get the desired products when requested\r\n   */\r\n  getProducts(): void {\r\n    this.productService.getProducts()\r\n    .subscribe(products => this.products = products);\r\n  }\r\n  /**\r\n   * The function adds the product to the store\r\n   * @param name - the name of the product\r\n   */\r\n  add(name: string): void {\r\n    name = name.trim();\r\n    if (!name) { return; }\r\n    this.productService.addProduct({ name } as Product)\r\n      .subscribe(product => {\r\n        this.products.push(product);\r\n      });\r\n  }\r\n  /**\r\n   * The function deletes the product from the store\r\n   * @param product - the product to be deleted\r\n   */\r\n  delete(product: Product): void {\r\n    this.products = this.products.filter(h => h !== product);\r\n    this.productService.deleteProduct(product.id).subscribe();\r\n  }\r\n  /**\r\n   * Adds a selected product to the cart\r\n   * @param product - the product to be added to the cart\r\n   */\r\n  addToCart(product: Product): void {\r\n    if(this.currentUser != undefined) {\r\n        this.shoppingCartService.addToCartMain(product);\r\n    }\r\n  }\r\n}\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}