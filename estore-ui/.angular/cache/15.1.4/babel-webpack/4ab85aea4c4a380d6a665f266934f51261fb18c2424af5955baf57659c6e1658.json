{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/router\";\nimport * as i2 from \"../product.service\";\nimport * as i3 from \"@angular/common\";\nimport * as i4 from \"../sharing-service\";\nimport * as i5 from \"../shopping-cart.service\";\nimport * as i6 from \"@angular/forms\";\nfunction ProductDetailComponent_div_0_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r7 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"label\", 1);\n    i0.ɵɵtext(2, \"Product name: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"input\", 2);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailComponent_div_0_div_8_Template_input_ngModelChange_3_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r6 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r6.product.name = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"label\", 3);\n    i0.ɵɵtext(5, \"Product price: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"input\", 4);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailComponent_div_0_div_8_Template_input_ngModelChange_6_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r8 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r8.product.price = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"label\", 3);\n    i0.ɵɵtext(8, \"Product quantity: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"input\", 5);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailComponent_div_0_div_8_Template_input_ngModelChange_9_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r9 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r9.product.quantity = $event);\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"label\", 3);\n    i0.ɵɵtext(11, \"Product description: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"input\", 6);\n    i0.ɵɵlistener(\"ngModelChange\", function ProductDetailComponent_div_0_div_8_Template_input_ngModelChange_12_listener($event) {\n      i0.ɵɵrestoreView(_r7);\n      const ctx_r10 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r10.product.description = $event);\n    });\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.product.name);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.product.price);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.product.quantity);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngModel\", ctx_r1.product.description);\n  }\n}\nfunction ProductDetailComponent_div_0_div_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h3\");\n    i0.ɵɵtext(2);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"h3\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"h3\");\n    i0.ɵɵtext(6);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"h3\");\n    i0.ɵɵtext(8);\n    i0.ɵɵelementEnd()();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Product name: \", ctx_r2.product.name, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Price: $\", ctx_r2.product.price, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Quantity: \", ctx_r2.product.quantity, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"Description: \", ctx_r2.product.description, \"\");\n  }\n}\nfunction ProductDetailComponent_div_0_div_10_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_0_div_10_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r11 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r11.goBack());\n    });\n    i0.ɵɵtext(2, \"go back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_0_div_10_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r13 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r13.save());\n    });\n    i0.ɵɵtext(4, \"save\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(5, \"button\", 8);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_0_div_10_Template_button_click_5_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const ctx_r14 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r14.delete(ctx_r14.product));\n    });\n    i0.ɵɵtext(6, \"delete\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailComponent_div_0_div_11_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r16 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_0_div_11_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r15 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r15.goBack());\n    });\n    i0.ɵɵtext(2, \"go back\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"button\", 9);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_0_div_11_Template_button_click_3_listener() {\n      i0.ɵɵrestoreView(_r16);\n      const ctx_r17 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r17.addToCart(ctx_r17.product));\n    });\n    i0.ɵɵtext(4, \"Add To Cart\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailComponent_div_0_div_12_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r19 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\")(1, \"button\", 7);\n    i0.ɵɵlistener(\"click\", function ProductDetailComponent_div_0_div_12_Template_button_click_1_listener() {\n      i0.ɵɵrestoreView(_r19);\n      const ctx_r18 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r18.goBack());\n    });\n    i0.ɵɵtext(2, \"go back\");\n    i0.ɵɵelementEnd()();\n  }\n}\nfunction ProductDetailComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"h2\");\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"uppercase\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\")(5, \"span\");\n    i0.ɵɵtext(6, \"id: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(8, ProductDetailComponent_div_0_div_8_Template, 13, 4, \"div\", 0);\n    i0.ɵɵtemplate(9, ProductDetailComponent_div_0_div_9_Template, 9, 4, \"div\", 0);\n    i0.ɵɵtemplate(10, ProductDetailComponent_div_0_div_10_Template, 7, 0, \"div\", 0);\n    i0.ɵɵtemplate(11, ProductDetailComponent_div_0_div_11_Template, 5, 0, \"div\", 0);\n    i0.ɵɵtemplate(12, ProductDetailComponent_div_0_div_12_Template, 3, 0, \"div\", 0);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(3, 7, ctx_r0.product.name), \" Details\");\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(ctx_r0.product.id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLoggedIn && !ctx_r0.isAdmin);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.isLoggedIn);\n  }\n}\n/**\n * The data attached to the product-detal component\n */\nexport class ProductDetailComponent {\n  /**\n   * The constructor of the product-detal component\n   * @param route - imported to aid the functions\n   * @param productService - imported to aid the functions\n   * @param location - imported to aid the functions\n   * @param shareService - imported to aid the functions\n   * @param shoppingCartService - imported to aid the functions\n   */\n  constructor(route, productService, location, shareService, shoppingCartService, router) {\n    this.route = route;\n    this.productService = productService;\n    this.location = location;\n    this.shareService = shareService;\n    this.shoppingCartService = shoppingCartService;\n    this.router = router;\n    this.products = [];\n    this.currentUser = undefined;\n    this.isLoggedIn = false;\n    this.isAdmin = false;\n  }\n  /**\n   * The function initializes the following data upon opening the page\n   */\n  ngOnInit() {\n    this.getProduct();\n    this.currentUser = this.shareService.getData();\n    this.currentUser = this.shareService.getData();\n    if (this.currentUser) {\n      this.isLoggedIn = true;\n      if (this.currentUser.username === \"admin\") {\n        this.isAdmin = true;\n      }\n    }\n  }\n  /**\n   * The function is used to get a single desired product\n   */\n  getProduct() {\n    const id = Number(this.route.snapshot.paramMap.get('id'));\n    this.productService.getProduct(id).subscribe(product => this.product = product);\n  }\n  /**\n   * The function serves as the operator of the go-back button\n   */\n  goBack() {\n    this.location.back();\n  }\n  /**\n   * The function saves the changes made to an element\n   */\n  save() {\n    if (this.product) {\n      this.productService.updateProduct(this.product).subscribe(() => this.goBack());\n    }\n  }\n  /**\n   * The function deletes a product from the store\n   * @param product - the product to be deleted\n   */\n  delete(product) {\n    this.products = this.products.filter(h => h !== product);\n    this.productService.deleteProduct(product.id).subscribe();\n  }\n  /**\n   * Adds a selected product to the cart\n   * @param product - the product to be added to the cart\n   *\n   */\n  addToCart(product) {\n    if (this.currentUser) {\n      let flag = false;\n      let lenCart = this.currentUser.cart.length;\n      for (let i = 0; i < lenCart; i++) {\n        if (product.id === this.currentUser.cart[i].id) {\n          flag = true;\n          break;\n        }\n      }\n      if (product.quantity == 0) {\n        window.alert(\"This product is currently out of stock\");\n      } else if (flag) {\n        window.alert(\"This product is already in the cart. If you wish to add more quantity to your order you can do it from the cart\");\n        this.router.navigateByUrl(\"/cart\");\n      } else {\n        this.shoppingCartService.addToCartMain(product);\n      }\n    }\n  }\n}\nProductDetailComponent.ɵfac = function ProductDetailComponent_Factory(t) {\n  return new (t || ProductDetailComponent)(i0.ɵɵdirectiveInject(i1.ActivatedRoute), i0.ɵɵdirectiveInject(i2.ProductService), i0.ɵɵdirectiveInject(i3.Location), i0.ɵɵdirectiveInject(i4.SharingService), i0.ɵɵdirectiveInject(i5.ShoppingCartService), i0.ɵɵdirectiveInject(i1.Router));\n};\nProductDetailComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProductDetailComponent,\n  selectors: [[\"app-product-detail\"]],\n  decls: 1,\n  vars: 1,\n  consts: [[4, \"ngIf\"], [\"for\", \"hero-name\"], [\"id\", \"product-name\", \"placeholder\", \"product name\", 3, \"ngModel\", \"ngModelChange\"], [\"for\", \"product-price\"], [\"id\", \"product-name\", \"placeholder\", \"product price\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"product-name\", \"placeholder\", \"product quantity\", 3, \"ngModel\", \"ngModelChange\"], [\"id\", \"product-name\", \"placeholder\", \"product description\", 3, \"ngModel\", \"ngModelChange\"], [\"type\", \"button\", 3, \"click\"], [\"type\", \"button\", \"title\", \"delete product\", 1, \"delete\", 3, \"click\"], [1, \"button\", 3, \"click\"]],\n  template: function ProductDetailComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProductDetailComponent_div_0_Template, 13, 9, \"div\", 0);\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", ctx.product);\n    }\n  },\n  dependencies: [i3.NgIf, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgModel, i3.UpperCasePipe],\n  styles: [\"label[_ngcontent-%COMP%] {\\n    color: #435960;\\n    font-weight: bold;\\n  }\\n  input[_ngcontent-%COMP%] {\\n    font-size: 1em;\\n    padding: .5rem;\\n  }\\n  button[_ngcontent-%COMP%] {\\n    margin-top: 20px;\\n    background-color: #eee;\\n    padding: 1rem;\\n    border-radius: 4px;\\n    font-size: 1rem;\\n  }\\n  button[_ngcontent-%COMP%]:hover {\\n    background-color: #cfd8dc;\\n  }\\n  button[_ngcontent-%COMP%]:disabled {\\n    background-color: #eee;\\n    color: #ccc;\\n    cursor: auto;\\n  }\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvcHJvZHVjdC1kZXRhaWwvcHJvZHVjdC1kZXRhaWwuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSw2Q0FBNkM7QUFDN0M7SUFDSSxjQUFjO0lBQ2QsaUJBQWlCO0VBQ25CO0VBQ0E7SUFDRSxjQUFjO0lBQ2QsY0FBYztFQUNoQjtFQUNBO0lBQ0UsZ0JBQWdCO0lBQ2hCLHNCQUFzQjtJQUN0QixhQUFhO0lBQ2Isa0JBQWtCO0lBQ2xCLGVBQWU7RUFDakI7RUFDQTtJQUNFLHlCQUF5QjtFQUMzQjtFQUNBO0lBQ0Usc0JBQXNCO0lBQ3RCLFdBQVc7SUFDWCxZQUFZO0VBQ2QiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBIZXJvRGV0YWlsQ29tcG9uZW50J3MgcHJpdmF0ZSBDU1Mgc3R5bGVzICovXG5sYWJlbCB7XG4gICAgY29sb3I6ICM0MzU5NjA7XG4gICAgZm9udC13ZWlnaHQ6IGJvbGQ7XG4gIH1cbiAgaW5wdXQge1xuICAgIGZvbnQtc2l6ZTogMWVtO1xuICAgIHBhZGRpbmc6IC41cmVtO1xuICB9XG4gIGJ1dHRvbiB7XG4gICAgbWFyZ2luLXRvcDogMjBweDtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xuICAgIHBhZGRpbmc6IDFyZW07XG4gICAgYm9yZGVyLXJhZGl1czogNHB4O1xuICAgIGZvbnQtc2l6ZTogMXJlbTtcbiAgfVxuICBidXR0b246aG92ZXIge1xuICAgIGJhY2tncm91bmQtY29sb3I6ICNjZmQ4ZGM7XG4gIH1cbiAgYnV0dG9uOmRpc2FibGVkIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjZWVlO1xuICAgIGNvbG9yOiAjY2NjO1xuICAgIGN1cnNvcjogYXV0bztcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":";;;;;;;;;;IAIIA,2BAAqB;IAEIA,8BAAc;IAAAA,iBAAQ;IAC7CA,gCAAgF;IAAvDA;MAAAA;MAAA;MAAA,OAAaA,4CAAoB;IAAA,EAAP;IAAnDA,iBAAgF;IAChFA,gCAA2B;IAAAA,+BAAe;IAAAA,iBAAQ;IAClDA,gCAAkF;IAAzDA;MAAAA;MAAA;MAAA,OAAaA,6CAAqB;IAAA,EAAP;IAApDA,iBAAkF;IAClFA,gCAA2B;IAAAA,kCAAkB;IAAAA,iBAAQ;IACrDA,gCAAwF;IAA/DA;MAAAA;MAAA;MAAA,OAAaA,gDAAwB;IAAA,EAAP;IAAvDA,iBAAwF;IACxFA,iCAA2B;IAAAA,sCAAqB;IAAAA,iBAAQ;IACxDA,iCAA8F;IAArEA;MAAAA;MAAA;MAAA,OAAaA,oDAA2B;IAAA,EAAP;IAA1DA,iBAA8F;;;;IANrEA,eAA0B;IAA1BA,6CAA0B;IAE1BA,eAA2B;IAA3BA,8CAA2B;IAE3BA,eAA8B;IAA9BA,iDAA8B;IAE9BA,eAAiC;IAAjCA,oDAAiC;;;;;IAE5DA,2BAAsB;IAEhBA,YAA8B;IAAAA,iBAAK;IACvCA,0BAAI;IAAAA,YAAyB;IAAAA,iBAAK;IAClCA,0BAAI;IAAAA,YAA8B;IAAAA,iBAAK;IACvCA,0BAAI;IAAAA,YAAoC;IAAAA,iBAAK;;;;IAHzCA,eAA8B;IAA9BA,gEAA8B;IAC9BA,eAAyB;IAAzBA,2DAAyB;IACzBA,eAA8B;IAA9BA,gEAA8B;IAC9BA,eAAoC;IAApCA,sEAAoC;;;;;;IAE1CA,2BAAqB;IAEGA;MAAAA;MAAA;MAAA,OAASA,+BAAQ;IAAA,EAAC;IAACA,uBAAO;IAAAA,iBAAS;IACzDA,iCAAuC;IAAjBA;MAAAA;MAAA;MAAA,OAASA,6BAAM;IAAA,EAAC;IAACA,oBAAI;IAAAA,iBAAS;IACpDA,iCAC0B;IAA1BA;MAAAA;MAAA;MAAA,OAASA,8CAAe;IAAA,EAAC;IAACA,sBAAM;IAAAA,iBAAS;;;;;;IAE3CA,2BAAoC;IAEZA;MAAAA;MAAA;MAAA,OAASA,+BAAQ;IAAA,EAAC;IAACA,uBAAO;IAAAA,iBAAS;IACzDA,iCAAoD;IAA7BA;MAAAA;MAAA;MAAA,OAASA,iDAAkB;IAAA,EAAC;IAACA,2BAAW;IAAAA,iBAAS;;;;;;IAE1EA,2BAAyB;IACDA;MAAAA;MAAA;MAAA,OAASA,+BAAQ;IAAA,EAAC;IAACA,uBAAO;IAAAA,iBAAS;;;;;IAnC/DA,2BAAqB;IAEbA,YAAoC;;IAAAA,iBAAK;IAC7CA,2BAAK;IAAMA,oBAAI;IAAAA,iBAAO;IAAAA,YAAc;IAAAA,iBAAM;IAC1CA,8EAUM;IACNA,6EAMM;IACNA,+EAMM;IACNA,+EAIM;IACNA,+EAEM;IACVA,iBAAM;;;;IAnCEA,eAAoC;IAApCA,gFAAoC;IAClBA,eAAc;IAAdA,uCAAc;IAC9BA,eAAa;IAAbA,qCAAa;IAWbA,eAAc;IAAdA,sCAAc;IAOdA,eAAa;IAAbA,qCAAa;IAObA,eAA4B;IAA5BA,2DAA4B;IAK5BA,eAAiB;IAAjBA,yCAAiB;;;ACjB3B;;;AAGA,OAAM,MAAOC,sBAAsB;EAOnC;;;;;;;;EAQEC,YACUC,KAAqB,EACrBC,cAA8B,EAC9BC,QAAkB,EAClBC,YAA4B,EAC5BC,mBAAwC,EACxCC,MAAc;IALd,UAAK,GAALL,KAAK;IACL,mBAAc,GAAdC,cAAc;IACd,aAAQ,GAARC,QAAQ;IACR,iBAAY,GAAZC,YAAY;IACZ,wBAAmB,GAAnBC,mBAAmB;IACnB,WAAM,GAANC,MAAM;IAlBhB,aAAQ,GAAc,EAAE;IACxB,gBAAW,GAAmBC,SAAS;IACvC,eAAU,GAAW,KAAK;IAC1B,YAAO,GAAW,KAAK;EAgBpB;EAEH;;;EAGAC,QAAQ;IACN,IAAI,CAACC,UAAU,EAAE;IACjB,IAAI,CAACC,WAAW,GAAE,IAAI,CAACN,YAAY,CAACO,OAAO,EAAE;IAC7C,IAAI,CAACD,WAAW,GAAE,IAAI,CAACN,YAAY,CAACO,OAAO,EAAE;IAC7C,IAAG,IAAI,CAACD,WAAW,EAAC;MAClB,IAAI,CAACE,UAAU,GAAE,IAAI;MACrB,IAAG,IAAI,CAACF,WAAW,CAACG,QAAQ,KAAK,OAAO,EAAC;QACvC,IAAI,CAACC,OAAO,GAAE,IAAI;;;EAGxB;EACA;;;EAGAL,UAAU;IACR,MAAMM,EAAE,GAAGC,MAAM,CAAC,IAAI,CAACf,KAAK,CAACgB,QAAQ,CAACC,QAAQ,CAACC,GAAG,CAAC,IAAI,CAAC,CAAC;IACzD,IAAI,CAACjB,cAAc,CAACO,UAAU,CAACM,EAAE,CAAC,CAC/BK,SAAS,CAACC,OAAO,IAAI,IAAI,CAACA,OAAO,GAAGA,OAAO,CAAC;EACjD;EAEA;;;EAGAC,MAAM;IACJ,IAAI,CAACnB,QAAQ,CAACoB,IAAI,EAAE;EACtB;EAEA;;;EAGAC,IAAI;IACF,IAAI,IAAI,CAACH,OAAO,EAAE;MAChB,IAAI,CAACnB,cAAc,CAACuB,aAAa,CAAC,IAAI,CAACJ,OAAO,CAAC,CAC5CD,SAAS,CAAC,MAAM,IAAI,CAACE,MAAM,EAAE,CAAC;;EAErC;EACA;;;;EAIAI,MAAM,CAACL,OAAgB;IACrB,IAAI,CAACM,QAAQ,GAAG,IAAI,CAACA,QAAQ,CAACC,MAAM,CAACC,CAAC,IAAIA,CAAC,KAAKR,OAAO,CAAC;IACxD,IAAI,CAACnB,cAAc,CAAC4B,aAAa,CAACT,OAAO,CAACN,EAAE,CAAC,CAACK,SAAS,EAAE;EAC3D;EAEA;;;;;EAKAW,SAAS,CAACV,OAAgB;IACxB,IAAG,IAAI,CAACX,WAAW,EAAC;MAClB,IAAIsB,IAAI,GAAY,KAAK;MACzB,IAAIC,OAAO,GAAE,IAAI,CAACvB,WAAW,CAACwB,IAAI,CAACC,MAAM;MACzC,KAAI,IAAIC,CAAC,GAAE,CAAC,EAACA,CAAC,GAAEH,OAAO,EAAEG,CAAC,EAAE,EAAC;QAC3B,IAAGf,OAAO,CAACN,EAAE,KAAK,IAAI,CAACL,WAAW,CAACwB,IAAI,CAACE,CAAC,CAAC,CAACrB,EAAE,EAAC;UAC5CiB,IAAI,GAAE,IAAI;UACV;;;MAGJ,IAAIX,OAAO,CAACgB,QAAQ,IAAI,CAAC,EAAE;QACzBC,MAAM,CAACC,KAAK,CAAC,wCAAwC,CAAC;OACvD,MACI,IAAGP,IAAI,EAAC;QACXM,MAAM,CAACC,KAAK,CAAC,iHAAiH,CAAC;QAC/H,IAAI,CAACjC,MAAM,CAACkC,aAAa,CAAC,OAAO,CAAC;OACnC,MACI;QACH,IAAI,CAACnC,mBAAmB,CAACoC,aAAa,CAACpB,OAAO,CAAC;;;EAGrD;;AAlGWtB,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAA2C;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MDpBnChD,wEAqCM;;;MArCAA,kCAAa","names":["i0","ProductDetailComponent","constructor","route","productService","location","shareService","shoppingCartService","router","undefined","ngOnInit","getProduct","currentUser","getData","isLoggedIn","username","isAdmin","id","Number","snapshot","paramMap","get","subscribe","product","goBack","back","save","updateProduct","delete","products","filter","h","deleteProduct","addToCart","flag","lenCart","cart","length","i","quantity","window","alert","navigateByUrl","addToCartMain","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["/Users/aarohanmishra/Documents/SWEN/team-project-2225-swen-261-03-g-team0/estore-ui/src/app/product-detail/product-detail.component.html","/Users/aarohanmishra/Documents/SWEN/team-project-2225-swen-261-03-g-team0/estore-ui/src/app/product-detail/product-detail.component.ts"],"sourcesContent":["<div *ngIf=\"product\">\n    <!-- this displays each product and the information associated with it in a list-->\n    <h2>{{product.name | uppercase}} Details</h2>\n    <div><span>id: </span>{{product.id}}</div>\n    <div *ngIf=\"isAdmin\">\n      <!--should the user be an admin, they amay view extra details about the shoes here-->\n      <label for=\"hero-name\">Product name: </label>\n      <input id=\"product-name\" [(ngModel)]=\"product.name\" placeholder=\"product name\"/>\n      <label for=\"product-price\">Product price: </label>\n      <input id=\"product-name\" [(ngModel)]=\"product.price\" placeholder=\"product price\"/>\n      <label for=\"product-price\">Product quantity: </label>\n      <input id=\"product-name\" [(ngModel)]=\"product.quantity\" placeholder=\"product quantity\"/>\n      <label for=\"product-price\">Product description: </label>\n      <input id=\"product-name\" [(ngModel)]=\"product.description\" placeholder=\"product description\"/>\n    </div>\n    <div *ngIf=\"!isAdmin\">\n      <!--If the user is not an admin, they may view the price and details here, but they are unable to make changes to the items-->\n      <h3>Product name: {{product.name}}</h3>\n      <h3>Price: ${{product.price}}</h3>\n      <h3>Quantity: {{product.quantity}}</h3>\n      <h3>Description: {{product.description}}</h3>\n    </div>\n    <div *ngIf=\"isAdmin\">\n      <!--If the user is an admin, they may make changes to the products as they wish here, but can not add items to the cart-->\n      <button type=\"button\" (click)=\"goBack()\">go back</button>\n      <button type=\"button\" (click)=\"save()\">save</button>\n      <button type=\"button\" class=\"delete\" title=\"delete product\"\n      (click)=\"delete(product)\">delete</button>\n    </div>\n    <div *ngIf=\"isLoggedIn && !isAdmin\">\n      <!--If the user is logged in as a customer, they will be able to add items to the cart-->\n      <button type=\"button\" (click)=\"goBack()\">go back</button>\n      <button class=\"button\" (click)=\"addToCart(product)\">Add To Cart</button>\n    </div>\n    <div *ngIf=\"!isLoggedIn\">\n      <button type=\"button\" (click)=\"goBack()\">go back</button>\n    </div>\n</div>","import { Component, Input } from '@angular/core';\n\nimport { Product } from '../product';\n\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { Location } from '@angular/common';\n\nimport { ProductService } from '../product.service';\nimport { Login } from '../login';\nimport { SharingService } from '../sharing-service';\nimport { ShoppingCartService } from '../shopping-cart.service';\n\n@Component({\n  selector: 'app-product-detail',\n  templateUrl: './product-detail.component.html',\n  styleUrls: ['./product-detail.component.css']\n})\n/**\n * The data attached to the product-detal component\n */\nexport class ProductDetailComponent {\n\n  product: Product | undefined;\n  products: Product[] = [];\n  currentUser: Login|undefined= undefined;\n  isLoggedIn: boolean= false;\n  isAdmin: boolean= false;\n/**\n * The constructor of the product-detal component\n * @param route - imported to aid the functions\n * @param productService - imported to aid the functions\n * @param location - imported to aid the functions\n * @param shareService - imported to aid the functions\n * @param shoppingCartService - imported to aid the functions\n */\n  constructor(\n    private route: ActivatedRoute,\n    private productService: ProductService,\n    private location: Location,\n    private shareService: SharingService,\n    private shoppingCartService: ShoppingCartService,\n    private router: Router\n  ) {}\n  \n  /**\n   * The function initializes the following data upon opening the page\n   */\n  ngOnInit(): void {\n    this.getProduct();\n    this.currentUser= this.shareService.getData();\n    this.currentUser= this.shareService.getData();\n    if(this.currentUser){\n      this.isLoggedIn= true;\n      if(this.currentUser.username === \"admin\"){\n        this.isAdmin= true;\n      }\n    }\n  }\n  /**\n   * The function is used to get a single desired product\n   */\n  getProduct(): void {\n    const id = Number(this.route.snapshot.paramMap.get('id'));\n    this.productService.getProduct(id)\n      .subscribe(product => this.product = product);\n  }\n\n  /**\n   * The function serves as the operator of the go-back button\n   */\n  goBack(): void {\n    this.location.back();\n  }\n\n  /**\n   * The function saves the changes made to an element\n   */\n  save(): void {\n    if (this.product) {\n      this.productService.updateProduct(this.product)\n        .subscribe(() => this.goBack());\n    }\n  }\n  /**\n   * The function deletes a product from the store\n   * @param product - the product to be deleted\n   */\n  delete(product: Product): void {\n    this.products = this.products.filter(h => h !== product);\n    this.productService.deleteProduct(product.id).subscribe();\n  }\n\n  /**\n   * Adds a selected product to the cart\n   * @param product - the product to be added to the cart\n   * \n   */\n  addToCart(product: Product) {\n    if(this.currentUser){\n      let flag: boolean = false;\n      let lenCart= this.currentUser.cart.length;\n      for(let i= 0;i <lenCart; i++){\n        if(product.id === this.currentUser.cart[i].id){\n          flag= true;\n          break;\n        }\n      }\n      if (product.quantity == 0) {\n        window.alert(\"This product is currently out of stock\");\n      }\n      else if(flag){\n        window.alert(\"This product is already in the cart. If you wish to add more quantity to your order you can do it from the cart\");\n        this.router.navigateByUrl(\"/cart\");\n      }\n      else {\n        this.shoppingCartService.addToCartMain(product);\n      }\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}